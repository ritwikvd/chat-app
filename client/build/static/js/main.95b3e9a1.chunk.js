(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),o=a(56),u=a.n(o),s=a(3),l=a(21),m=a.n(l),i=(a(95),a(1)),E=a(11),f=function(e){var t=e.focus,a=e.setState,n=e.error,c=e.setError,o=e.messages;return r.a.createElement("input",{type:"text",placeholder:n?o[0]:o[1],className:n?"shake":"",onFocus:function(){return n?c(!1):null},onChange:function(e){return a(e.target.value)},autoFocus:!!t})},h=function(e){var t=Object(c.useState)(""),a=Object(s.a)(t,2),o=a[0],u=a[1],l=Object(c.useState)(""),h=Object(s.a)(l,2),O=h[0],b=h[1],p=Object(c.useState)(!1),d=Object(s.a)(p,2),g=d[0],j=d[1],v=Object(c.useState)(!1),S=Object(s.a)(v,2),y=S[0],N=S[1],T=Object(c.useState)(!1),_=Object(s.a)(T,2),C=_[0],k=_[1],D=Object(c.useState)(!1),P=Object(s.a)(D,2),w=P[0],W=P[1],x=Object(c.useState)(""),K=Object(s.a)(x,2),A=K[0],R=K[1],H=Object(c.useState)(!1),L=Object(s.a)(H,2),F=L[0],I=L[1],M=Object(c.useState)(!1),U=Object(s.a)(M,2),Y=U[0],B=U[1],q=Object(c.useState)(!1),J=Object(s.a)(q,2),V=J[0],z=J[1];Object(c.useEffect)((function(){document.querySelector("title").textContent="Welcome!",e&&e.location.error&&(R(e.location.error),I(!0),setTimeout((function(){return I(!1)}),5e3)),n=m()(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_ENDPOINT),z(!0)}),[]),Object(c.useEffect)((function(){g||y||k(!1)}),[g,y]);return Y?r.a.createElement(i.a,{to:{pathname:"/chat",search:"?name=".concat(o,"&room=").concat(O),state:{token:!0}}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:V?"home-class fade overlay":"home-class overlay"},r.a.createElement("div",{className:"banner"},r.a.createElement("h2",null,"Welcome to yet another Chat App!"),r.a.createElement("p",null,"Enter a name and a chat room to start chatting...!")),r.a.createElement("div",{className:"form-class"},r.a.createElement("form",null,r.a.createElement("p",{className:F?"fade-in":"fade-out"},A),r.a.createElement(f,{focus:!0,setState:u,error:g,setError:j,messages:["You need a name first!","Enter a name to chat with"]}),r.a.createElement(f,{focus:!1,setState:b,error:y,setError:N,messages:["We don't know which room you want to chat in!","Which room would you like to join?"]}),r.a.createElement(E.b,{onClick:function(e){e.preventDefault(),(g||y)&&(k(!0),W(!0),setTimeout((function(){return W(!1)}),550)),o||j(!0),O||N(!0),o&&O&&n.emit("checkUser",{name:o,room:O},(function(e){e?(R('"'.concat(o,'" has already been taken in the chat room "').concat(O,'"')),I(!0),setTimeout((function(){return I(!1)}),5e3)):B(!0)}))},to:{pathname:"/chat",search:"?name=".concat(o,"&room=").concat(O),state:{token:!0}}},r.a.createElement("button",{type:"submit",className:w?"shake":""},C?"Sorry, can't let you thru!":"Start Chatting"))))))},O=a(15),b=a(59),p=a.n(b),d=a(60),g=a.n(d),j=a(61),v=a.n(j),S=(a(149),function(e){var t=e.message,a=e.name;return r.a.createElement("div",{className:t.user==a?"float-left":"float-right"},r.a.createElement("span",{className:"user-name"},t.user!==a?t.user:""),r.a.createElement("span",null,v.a.emojify(t.message)))}),y=function(e){var t=e.messages,a=e.name;return r.a.createElement(g.a,null,t.map((function(e){return r.a.createElement(S,{message:e,name:a})})))};var N=function(e){var t=e.message,a=e.setMessage,n=e.sendMessage,o=e.setPersonTyping,u=r.a.createRef();return Object(c.useLayoutEffect)((function(){return u.current.focus()})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.target.input.value&&e.target.input.value.trim()&&(n(e),o(!1))}},r.a.createElement("input",{name:"input",ref:u,type:"text",placeholder:"You know how this works!",value:t,onChange:function(e){a(e.target.value),o(!0)},autoFocus:!0}),r.a.createElement("button",{type:"submit"},"Send"))},T=(a(150),null),_=function(){return r.a.createElement("p",null,"Looks like you're the only one here : |")},C=function(e){var t=e.users;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"You're here with ",1==t.length?"this chatter":"these chatters","..."),r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))},k=function(e){var t=e.location,a=t.search,n=t.state,o=Object(c.useState)(""),u=Object(s.a)(o,2),l=u[0],f=u[1],h=Object(c.useState)(""),b=Object(s.a)(h,2),d=b[0],g=b[1],j=Object(c.useState)([]),v=Object(s.a)(j,2),S=v[0],k=v[1],D=Object(c.useState)([]),P=Object(s.a)(D,2),w=P[0],W=P[1],x=Object(c.useState)(""),K=Object(s.a)(x,2),A=K[0],R=K[1],H=Object(c.useState)([]),L=Object(s.a)(H,2),F=L[0],I=L[1],M=Object(c.useState)(!1),U=Object(s.a)(M,2),Y=U[0],B=U[1];Object(c.useEffect)((function(){B(!0);var e=p.a.parse(a),t=e.name,n=e.room;return document.querySelector("title").textContent="Have fun chatting in ".concat(n,"!"),f(t),g(n),(T=m()(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_ENDPOINT)).on("message",(function(e){return W((function(t){return[].concat(Object(O.a)(t),[e])}))})),T.on("roomData",(function(e){var a=e.users;return k(Object(O.a)(a.filter((function(e){return e.name!==t}))))})),T.on("isTyping",(function(e){var t=e.name;return I((function(e){return e.includes(t)?e:[].concat(Object(O.a)(e),[t])}))})),T.on("notTyping",(function(e){var t=e.name;return I((function(e){var a=Object(O.a)(e),n=a.indexOf(t);return a.splice(n,1),a}))})),T.emit("join",{name:t,room:n}),function(){T.emit("remove",{name:t,room:n}),T.disconnect()}}),[]);return n&&n.token?r.a.createElement("div",{className:Y?"chat-class fade":"chat-class"},r.a.createElement("div",{className:"room-info"},r.a.createElement("h2",null,"You're now chatting in ",d,"!"),0==S.length?r.a.createElement(_,null):r.a.createElement(C,{users:S.map((function(e){return e.name}))}),r.a.createElement(E.b,{to:"/"},r.a.createElement("button",null,"Need to go?"))),r.a.createElement("div",{className:"chat-box-container"},r.a.createElement("div",{className:"chat-box"},r.a.createElement(y,{messages:w,name:l}),F.length?r.a.createElement("div",{className:"typing-container"},r.a.createElement("div",{className:"dots"}),r.a.createElement("div",{className:"dots"}),r.a.createElement("div",{className:"dots"}),F.length<3?r.a.createElement("p",null,F.join(", ")," ",F.length>1?" are typing...":" is typing..."):r.a.createElement("p",null,"Several people are typing...")):null,r.a.createElement(N,{message:A,setMessage:R,sendMessage:function(e){e.preventDefault(),A&&T.emit("sendMessage",{message:A,room:d,name:l},(function(){return R("")}))},setPersonTyping:function(e){return T.emit("typing",{typing:e,room:d,name:l})}})))):r.a.createElement(i.a,{to:{pathname:"/",error:"Hey! no cheating : |"}})},D=function(){return r.a.createElement(E.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:h}),r.a.createElement(i.b,{path:"/chat",component:k}),r.a.createElement(i.a,{to:{pathname:"/"}})))};u.a.render(r.a.createElement(D,null),document.getElementById("root"))},62:function(e,t,a){e.exports=a(151)},92:function(e,t){},95:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.95b3e9a1.chunk.js.map